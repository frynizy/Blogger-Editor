<div class="non-invasive-web-style-framework">
  <div class="ui modal PostManager">
    <i class="close icon" @click="close"></i>
    <div class="header">
      <i class="blogger icon"></i>
      Post Manager
    </div>
    <!-- ---------------------------------------- -->
    
    <div class="content">
      <div class="description ui form">
        <div class="fields">
          <div class="four wide field"
                @click="newPost">
            <div class="ui fluid button">
              NEW
            </div>
          </div>
          <div class="twelve wide field">
            <div class="ui icon input post-filter" >
              <input type="text" 
                     placeholder="Filter..."
                     v-model="filterCondition"
                     @keyup="filterPosts">
              <i class="filter icon"></i>
            </div>
          </div>
        </div>

        <div class="ui divided unstackable items post-list"
              :key="componentRerenderKey">
          
          <div class="item" 
               v-for="post in filteredPosts"
               v-bind:class="{ editing: (editingPostId === post.id) }">
            <a class="image" href="#"
                 v-if="post.thumbnail" 
                 @click="openPost(post.id)">
              <img :src="post.thumbnail" />
            </a>
            <div class="content">
              <a class="header" href="#"
                 @click="openPost(post.id)">
                <span>
                  #{{ post.id }}
                </span>
                <span v-if='post.title === ""'>
                  (No title)
                </span>
                <span v-if='post.title !== ""'>
                  {{ post.title }}
                </span>
              </a>
              <div class="description" 
                   v-if='post.abstract !== ""'>
                {{ post.abstract }}
              </div>
              <div class="extra">
                <div class="ui right floated">
                  <span>
                    <i class="calendar alternate outline icon"></i>
                    {{ displayDate(post.updateUnix) }}   
                  </span>
                  <span v-if='post.labels'>
                    <i class="tag icon" 
                       v-if='post.labels.split(",").length === 1'></i>
                    <i class="tags icon" 
                       v-if='post.labels.split(",").length > 1'></i>
                    {{ post.labels }}
                  </span>
                  <!--<i class='close icon'></i>-->
                </div>
                <div class="ui right floated">
                  <div class='ui mini button'
                       @click='openPost(post.id)'>
                    <span v-if='editingPostId != post.id'>
                      OPEN
                    </span>
                    <span v-if='editingPostId == post.id'>
                      EDITING
                    </span>
                  </div>
                  
                  <div class='ui mini button'
                       @v-if="posts.length > 1"
                       @click='removePost(post.id)'>
                    REMOVE
                  </div>
                  <div class='ui icon mini button' 
                       @click='clonePost(post.id)'>
                    <i class="copy icon"></i>
                    <!-- CLONE -->
                  </div>
                  <div class='ui mini button' 
                       @click='backupPost(post.id)'>
                    <!-- BACKUP -->
                    <i class="download icon"></i>
                  </div>
                </div>
              </div>
            </div>
          </div> <!-- item -->
        </div> <!-- post-list -->
        
        <div class="two fields">
          <input type="file" name="uploadPosts"
              @change="uploadPosts"/>
          <div class="field" 
                @click="backupAllPosts">
            <div class="ui labeled icon fluid button">
              <i class="download icon"></i>
              BACKUP
            </div>
          </div>
          <div class="field" 
                @click="triggerUploadPosts">
            <div class="ui labeled icon fluid button">
              <i class="upload icon"></i>
              UPLOAD
            </div>
          </div>
          
          <div class="dragover-message"
               @drop="dropPosts">
            Drop file to upload
          </div>
        </div>
      </div>
    </div>
  </div>
</div>